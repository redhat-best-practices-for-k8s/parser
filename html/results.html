<!DOCTYPE html>
<html lang="en">

<head>
  <title>CNF Certification Test Parser</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon"
        type="image/svg+xml"
        sizes="any"
        href="https://ux.redhat.com/assets/logo-red-hat.svg">
        <link rel="shortcut icon" href="/assets/logo-red-hat.svg">
        <link rel="preconnect" href="https://ga.jspm.io">
        <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="stylesheet" href="https://ux.redhat.com/assets/packages/@rhds/elements/elements/rh-footer/rh-footer-lightdom.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.11.2/cdn/themes/dark.css">
  <script type="importmap">
    {
      "imports": {
        "@rhds/elements/": "https://ga.jspm.io/npm:@rhds/elements@1.2.0/elements/",
        "@rhds/elements/lib/": "https://ga.jspm.io/npm:@rhds/elements@1.2.0/elements/lib/",
        "@patternfly/elements/": "https://ga.jspm.io/npm:@patternfly/elements@2.4.0/"
      },
      "scopes": {
        "https://ga.jspm.io/": {
          "@lit/reactive-element": "https://ga.jspm.io/npm:@lit/reactive-element@1.6.3/reactive-element.js",
          "@lit/reactive-element/decorators/": "https://ga.jspm.io/npm:@lit/reactive-element@1.6.3/decorators/",
          "@patternfly/elements/": "https://ga.jspm.io/npm:@patternfly/elements@2.4.0/",
          "@patternfly/pfe-core": "https://ga.jspm.io/npm:@patternfly/pfe-core@2.4.1/core.js",
          "@patternfly/pfe-core/": "https://ga.jspm.io/npm:@patternfly/pfe-core@2.4.1/",
          "@rhds/tokens/media.js": "https://ga.jspm.io/npm:@rhds/tokens@1.1.2/js/media.js",
          "lit": "https://ga.jspm.io/npm:lit@2.8.0/index.js",
          "lit-element/lit-element.js": "https://ga.jspm.io/npm:lit-element@3.3.3/lit-element.js",
          "lit-html": "https://ga.jspm.io/npm:lit-html@2.8.0/lit-html.js",
          "lit-html/": "https://ga.jspm.io/npm:lit-html@2.8.0/",
          "lit/": "https://ga.jspm.io/npm:lit@2.8.0/",
          "tslib": "https://ga.jspm.io/npm:tslib@2.6.2/tslib.es6.mjs"
        },
        "https://ga.jspm.io/npm:@patternfly/elements@2.4.0/": {
          "lit": "https://ga.jspm.io/npm:lit@2.6.1/index.js",
          "lit/": "https://ga.jspm.io/npm:lit@2.6.1/"
        }
      }
    }
  </script>

  <link href="https://rawgit.com/summerstyle/jsonTreeViewer/master/libs/jsonTree/jsonTree.css" rel="stylesheet">
  <script src="https://rawgit.com/summerstyle/jsonTreeViewer/master/libs/jsonTree/jsonTree.js"></script>
  <script type="module">
    // import design system element definitions,
    // which auto-register their tagnames once executed
    import '@rhds/elements/rh-button/rh-button.js';
    import '@rhds/elements/rh-dialog/rh-dialog.js';
    import '@rhds/elements/rh-footer/rh-footer-universal.js';
    import '@rhds/elements/rh-footer/rh-footer-universal.js';
    import '@patternfly/elements/pf-text-input/pf-text-input.js';
    import '@rhds/elements/rh-tabs/rh-tabs.js';
    import '@rhds/elements/rh-accordion/rh-accordion.js';
    import 'https://jspm.dev/@rhds/elements/rh-tag/rh-tag.js'
</script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" integrity="sha256-2TnSHycBDAm2wpZmgdi0z81kykGPJAkiUY+Wf97RbvY=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" integrity="sha256-X0cPqbNml7z/f/z7c1HiTdJ2aSO4QmaAMDnESV5n7fE=" crossorigin="anonymous">

  <style>body,html{font-family:var(--rh-font-family-body-text, RedHatText, "Red Hat Text", "Noto Sans Arabic", "Noto Sans Hebrew", Helvetica, Arial, sans-serif);margin:0;padding:0;height:100%}body.dark,header{color:var(--rh-color-text-primary-on-dark, #fff)}body,header{grid-template-areas:"header""main""footer"}header,progress{display:flex;align-items:center}header{height:var(--rh-length-5xl, 100px);background:var(--rh-color-surface-darkest, #151515);padding-inline:var(--rh-space-xl, 24px);gap:var(--rh-space-xl, 24px)}progress{height:var(--rh-length-5xl, 60px);width:0%}h1{font-size:var(--rh-font-size-heading-2xl, 3rem);margin:0}datalist,main{flex-direction:column}main{grid-area:main;margin:var(--rh-space-xl, 10px);flex-flow:row wrap;margin-block:10px;margin-inline:20px}[data-demo],form{display:contents}fieldset{display:grid;flex:1 1 100%}input[type=checkbox],label{display:inline-block}label{font-weight:var(--rh-font-weight-heading-bold, 700);margin-block-end:var(--rh-space-sm, 6px)}rh-footer-universal{margin-block-start:auto}body{color:var(--rh-color-text-primary-on-light, #151515);background-color:var(--rh-color-surface-lightest, #fff);display:grid}body.dark{background-color:var(--rh-color-surface-darkest, #151515)}section{padding:16px}form h2{width:100%}form output{text-transform:capitalize}datalist{display:flex;justify-content:space-between;writing-mode:vertical-lr}datalist,input{width:200px}option{padding:0}a{color:var(--rh-color-interactive-blue-darker, #06c)}a:hover{color:var(--rh-color-interactive-blue-darkest, #004080)}a:visited{color:var(--rh-color-interactive-purple-darker, #6753ac)}.dark a{color:var(--rh-color-interactive-blue-lighter, #73bcf7)}.dark a:hover{color:var(--rh-color-interactive-blue-lightest, #bee1f4)}.dark a:visited{color:var(--rh-color-interactive-purple-lighter, #a18fff)}#config-table li{list-style:none}rh-accordion-header rh-tag{margin-inline-start:var(--rh-space-md, 8px)}.tag-header,main{display:flex;gap:var(--rh-space-lg, 16px)}.tag-header{align-items:center}tblack{font-size:17px}input.larger-checkbox{width:17px;height:17px}sl-tree-item::part(item--selected){border-inline-start-color:red}</style>

  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.10.4/dayjs.min.js" integrity="sha256-NTsR4SOm3YHfJrmrmvBtEYqfQ6jQ5yvEKMhgQe3DIl0=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.10.4/plugin/duration.min.js" integrity="sha256-6rug74IKp6v/8WINJxMw33zXo8NVOdRw/5Ib21ZzwU4=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-0upsHgyryiDRjpJLJaHNAYfDi6fDP2CrBuGwQCubzbU=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/ansi_up@5.1.0/ansi_up.js" integrity="sha256-tarXJ7M5ReiY9qzPiDQdY5EZcrMil9PaXwnVbAgWbo8=" crossorigin="anonymous"></script>
  <script>const expectedClaimVersion="v0.1.0";let claimGlobal,feedbackGlobal,isResultTabActive=!1,uuidNode=1;function selectScenarioHandler(){!0===isResultTabActive&&resfreshResultsTabContent()}function resfreshResultsTabContent(){hideAllResultsTabObjects(),enableSendDownloadButton(),isResultTabActive=!0;const e=document.getElementById("selectScenarioComboBox");"all"===e.options[e.selectedIndex].value?showAll():(document.getElementById("results-table").setAttribute("hidden","hidden"),document.getElementById("myCheck-result").removeAttribute("hidden"),document.getElementById("optional-checkbox").removeAttribute("hidden"),document.getElementById("myCheck-mandatory").removeAttribute("hidden"),document.getElementById("mandatory-checkbox").removeAttribute("hidden")),makeResultsTableVisible("optional"),makeResultsTableVisible("mandatory")}function makeResultsTableVisible(e){const t=document.getElementById(e+"-checkbox"),n=document.getElementById("selectScenarioComboBox"),o=n.options[n.selectedIndex].value;"faredge"===o&&(!0===t.checked?document.getElementById(e+"-far-edge-table").removeAttribute("hidden"):document.getElementById(e+"-far-edge-table").setAttribute("hidden","hidden")),"telco"===o&&(!0===t.checked?document.getElementById(e+"-telco-table").removeAttribute("hidden"):document.getElementById(e+"-telco-table").setAttribute("hidden","hidden")),"nontelco"===o&&(!0===t.checked?document.getElementById(e+"-non-telco-table").removeAttribute("hidden"):document.getElementById(e+"-non-telco-table").setAttribute("hidden","hidden")),"extended"===o&&(!0===t.checked?document.getElementById(e+"-extended-table").removeAttribute("hidden"):document.getElementById(e+"-extended-table").setAttribute("hidden","hidden"))}function filterTestCasesBasedOnStateHandler(e,t,n,o){const l=document.getElementById("filter-"+o+"-"+n+"-"+t),a=l.checked;a?l.setAttribute("checked",""):l.removeAttribute("checked");const d=e.replace(/#/g,""),s=document.getElementById(d).getElementsByTagName("rh-accordion-header");for(let e=0;e<s.length;e++){const t=s[e];t.getAttribute("data-id")===n&&(!0===a?t.removeAttribute("hidden"):t.setAttribute("hidden","hidden"))}}function showAll(){document.getElementById("mandatory-far-edge-table").setAttribute("hidden","hidden"),document.getElementById("mandatory-telco-table").setAttribute("hidden","hidden"),document.getElementById("mandatory-non-telco-table").setAttribute("hidden","hidden"),document.getElementById("mandatory-extended-table").setAttribute("hidden","hidden"),document.getElementById("optional-far-edge-table").setAttribute("hidden","hidden"),document.getElementById("optional-telco-table").setAttribute("hidden","hidden"),document.getElementById("optional-non-telco-table").setAttribute("hidden","hidden"),document.getElementById("optional-extended-table").setAttribute("hidden","hidden"),document.getElementById("results-table").removeAttribute("hidden")}function enableSendDownloadButton(){document.getElementById("download").removeAttribute("hidden"),document.getElementById("downloadjsonHandler").removeAttribute("hidden"),document.getElementById("UploadFeedback").removeAttribute("hidden")}function hideAllResultsTabObjects(){isResultTabActive=!1,document.getElementById("progress-bar").setAttribute("hidden","hidden"),document.getElementById("mandatory-far-edge-table").setAttribute("hidden","hidden"),document.getElementById("mandatory-non-telco-table").setAttribute("hidden","hidden"),document.getElementById("mandatory-extended-table").setAttribute("hidden","hidden"),document.getElementById("mandatory-telco-table").setAttribute("hidden","hidden"),document.getElementById("optional-far-edge-table").setAttribute("hidden","hidden"),document.getElementById("optional-non-telco-table").setAttribute("hidden","hidden"),document.getElementById("optional-extended-table").setAttribute("hidden","hidden"),document.getElementById("optional-telco-table").setAttribute("hidden","hidden"),document.getElementById("optional-checkbox").setAttribute("hidden","hidden"),document.getElementById("mandatory-checkbox").setAttribute("hidden","hidden"),document.getElementById("download").setAttribute("hidden","hidden"),document.getElementById("downloadjsonHandler").setAttribute("hidden","hidden"),document.getElementById("UploadFeedback").setAttribute("hidden","hidden"),document.getElementById("myCheck-result").setAttribute("hidden","hidden"),document.getElementById("myCheck-mandatory").setAttribute("hidden","hidden")}function fillVersionsElement(e,t){$(t).empty(),$('<thead><tr><th scope="col">Component</th><th scope="col">Version</th></tr></thead><tbody>').appendTo($(t));for(const n in e)$("<tr><td><b>"+n+"</b></td><td>"+e[n]+"</td></tr>").appendTo($(t));$("</tbody>").appendTo($(t))}function getClaimVersion(e){const t=e.claimFormat;if(void 0===t)return"nil - claimFormat version not present in claim file";const n=t.match(/(v[0-9]\.[0-9]\.[0-9])/);return null!==n&&n.length>1?n[1]:"nil - claimFormat version is not in a valid format, check claim file"}function fillMetadata(e,t){$(t).empty(),$("<tbody>").appendTo($(t));for(const n in e)$("<tr><td><b>"+n+"</b></td><td>"+e[n]+"</td></tr>").appendTo($(t));$("</tbody>").appendTo($(t))}$(document).ready((function(){"undefined"!=typeof initialjson&&(claimGlobal=initialjson),"undefined"!=typeof feedback&&(feedbackGlobal=feedback);const e=window.location.search,t=new URLSearchParams(e),n=t.get("claimfile"),o=t.get("feedback");console.log("claimfile via url:",n),console.log("feedbackfile via url:",o),fetchRenderClaimFile(n),fetchRenderFeedbackFile(o),void 0!==claimGlobal&&renderResultsWithModal();document.getElementById("feedbackFile").addEventListener("change",(function(){const e=this.files;if(e.length){const t=new FileReader;t.addEventListener("load",(e=>{fillFeedback(JSON.parse(t.result))})),t.readAsText(e[0])}this.value=null}),!1);document.getElementById("formFile").addEventListener("change",handleFiles,!1)}));const tableNameMap={faredge:"Far-Edge",telco:"Telco",nontelco:"Non-Telco",extended:"Extended",all:"All"};function getTestCaseStats(e,t){let n=0,o=0,l=0,a=0,d=0,s=0,i=0,r=0,c=0;for(const m in e){const u=e[m][0];let h=u.categoryClassification.FarEdge;"telco"===t&&(h=u.categoryClassification.Telco),"nontelco"===t&&(h=u.categoryClassification.NonTelco),"extended"===t&&(h=u.categoryClassification.Extended),"passed"===u.state?"Mandatory"===h||"all"===t?(n++,o++):s++:"skipped"===u.state?"Mandatory"===h||"all"===t?(n++,l++):i++:"failed"===u.state?"Mandatory"===h||"all"===t?(n++,a++):r++:"aborted"===u.state&&("Mandatory"===h||"all"===t?(n++,d++):c++)}return{testsTotal:n,testsPassed:o,testsSkipped:l,testsFailed:a,testsAborted:d,testsPassedOptional:s,testsSkippedOptional:i,testsFailedOptional:r,testsAbortedOptional:c}}function generateTestCasesStatsElement(e,t,n,o,l,a,d,s,i){let r="";return r="all"===t?'<thead><tr><th style="width:15%" scope="col">Test summary ('+tableNameMap[t]+')</th><th scope="col">Test feedback</th></tr></thead><tbody>':'<thead><tr><th style="width:15%" scope="col">'+n+" Test  summary ("+tableNameMap[t]+')</th><th scope="col">Test feedback</th></tr></thead><tbody>',r+='<tr><td class="align-top"><b><tblack>Total:</tblack></b><tblack> '+l+'</tblack><br><rh-tag color="green"> Passed </rh-tag></b> <tblack>'+a+"</tblack> ",r+='<input type="checkbox" class="larger-checkbox" id="filter-'+n+"-passed-"+t+'" checked onclick="filterTestCasesBasedOnStateHandler(\''+e+"','"+t+"', 'passed','"+n+"' )\" >",r+='<br><b><rh-tag color="gray"> Skipped </rh-tag></b> <tblack>'+d+"</tblack> ",r+='<input type="checkbox" class="larger-checkbox" id="filter-'+n+"-skipped-"+t+'" checked onclick="filterTestCasesBasedOnStateHandler(\''+e+"','"+t+"', 'skipped', '"+n+"' )\" >",r+='<br><b><rh-tag color="red"> Failed </rh-tag></b> <tblack>'+s+"</tblack> ",r+='<input type="checkbox" class="larger-checkbox" id="filter-'+n+"-failed-"+t+'" checked onclick="filterTestCasesBasedOnStateHandler(\''+e+"','"+t+"', 'failed', '"+n+"' )\" >",r+='<br><b><rh-tag color="purple"> Aborted </rh-tag></b> <tblack>'+i+"</tblack> ",r+='<input type="checkbox" class="larger-checkbox" id="filter-'+n+"-aborted-"+t+'" checked onclick="filterTestCasesBasedOnStateHandler(\''+e+"','"+t+"', 'aborted', '"+n+"' )\" >",r+="</td><td>",r+='<rh-accordion class="rh-accordion" id="results-accordion">',r}function generateTestcaseSingleResultElement(e,t,n,o){const l=new AnsiUp;let a="";const d=e.state;let s="";"passed"===d?s='<rh-tag color="green">Passed</rh-tag></div>':"skipped"===d?s='<rh-tag color="gray">Skipped</rh-tag></div>':"aborted"===d?s='<rh-tag color="purple">Aborted</rh-tag></div>':(s='<rh-tag color="red">Failed</rh-tag></div>',"Optional"===o&&"all"!==t||(s='<rh-tag color="red">failed</rh-tag></div>'));const i="collapse"+n,r="heading"+n;a+='<rh-accordion-header id="'+r+'" data-id="'+d+'" data-bs-target="#'+i+'" aria-expanded="true"><div class=tag-header><h6>'+e.testID.id+s+"</h6></rh-accordion-header>",a+='<rh-accordion-panel id="'+i+'"aria-labelledby="'+r+">",a+="<h1>Results</h1>",a+='<div class="table-responsive">',a+='<table id="myTable-'+e.testID.id+'" class="table table-bordered"><thead><tr>',a+="<th>Test ID</th>",a+='<th class="th-lg">Test Text</th>',a+="<th>Duration</th>",a+="<th>State</th>",a+="<th>Test output</th>",a+="</tr></thead><tbody>",dayjs.extend(window.dayjs_plugin_duration);const c=dayjs.duration(e.duration/1e6).format("D[d] H[h] m[m] s[s] SSS[ms]");let m="";"skipped"===e.state&&(m=e.failureReason,""===m&&(m="Test case skipped by configuration"),m=" ( "+m+" )"),a+='<tr><td  style="white-space: nowrap;">'+e.testID.id+"</td>",a+='<td class="th-lg">'+e.catalogInfo.description.replace(/\n/g,"<br>")+"</td>",a+="<td>"+c+"</td>",a+="<td><b>"+e.state+"</b>"+m+"</td>",a+="<td>"+l.ansi_to_html(ExtractLog(e.capturedTestOutput)).replace(/\n/g,"<br>")+"</td></tr>";const u=NonCompliantReasonTextToJson(e.capturedTestOutput),h=CompliantReasonTextToJson(e.capturedTestOutput);return a+="</tbody></table></div>",a+="<h1>Feedback</h1><label>Write your feedback for "+e.testID.id+" test case</label>",a+='<textarea style="width: 100%; margin: 0 auto;" rows = "5" id="source-'+t+"-"+e.testID.id+'" type="text"></textarea>',a+="<h1>Non-Compliant objects</h1>",a+=createReasonTableAllTypes(u),a+="<h1>Compliant objects</h1>",a+=createReasonTableAllTypes(h),a+="</rh-accordion-panel>",a}function fillResults(e,t,n,o){const l=Object.entries(e).sort((function(e,t){const n=e[1][0].testID.id+e[1][0].state,o=t[1][0].testID.id+t[1][0].state;return n.localeCompare(o)})),a=Object.fromEntries(l),d=getTestCaseStats(e,o);let s=generateTestCasesStatsElement(t,o,"mandatory","tred",d.testsTotal,d.testsPassed,d.testsSkipped,d.testsFailed,d.testsAborted),i=generateTestCasesStatsElement(n,o,"optional","ty",d.testsTotal,d.testsPassedOptional,d.testsSkippedOptional,d.testsFailedOptional,d.testsAbortedOptional),r=1;for(const t in a){const n=e[t][0];let l=n.categoryClassification.FarEdge;"telco"===o&&(l=n.categoryClassification.Telco),"nontelco"===o&&(l=n.categoryClassification.NonTelco),"extended"===o&&(l=n.categoryClassification.Extended),r+=1;const a=generateTestcaseSingleResultElement(n,o,r,l);"Mandatory"===l||"all"===o?s+=a:i+=a}s+="</rh-accordion></td></tr></tbody>",i+="</rh-accordion></td></tr></tbody>",$(s).appendTo($(t)),"all"!==o&&$(i).appendTo($(n))}function fillFeedback(e){for(const t in e){const n=document.getElementById(t);null!==n&&(n.textContent=n.value,n.textContent=e[t],n.value=e[t])}}function saveTextAreaContent(e){const t=document.getElementById("selectScenarioComboBox"),n="source-"+t.options[t.selectedIndex].value+"-"+e;console.log(n);const o=document.getElementById(n).value;document.getElementById(n).textContent=o}function handleFiles(){const e=this.files;if(e.length){const t=new FileReader;t.addEventListener("load",(e=>{claimGlobal=JSON.parse(t.result),renderResultsWithModal()})),t.readAsText(e[0])}}function renderResultsWithModal(){const e=getClaimVersion(claimGlobal.claim.versions),t=document.getElementById("modalBody");if(expectedClaimVersion!==e){$("#staticBackdrop").modal("show"),t.textContent="Unsupported claim format. Expecting: "+expectedClaimVersion+" but got: "+e;document.getElementById("continueLoadingClaim").addEventListener("click",renderResults)}else renderResults()}function fetchRenderClaimFile(e){null!==e&&fetch(e).then((e=>{if(!e.ok)throw new Error(`HTTP error, status = ${e.status}`);return e.json()})).then((e=>{claimGlobal=e,renderResultsWithModal()})).catch((e=>{console.log(`Error: ${e.message}`)}))}function fetchRenderFeedbackFile(e){null!==e&&fetch(e).then((e=>{if(!e.ok)throw new Error(`HTTP error, status = ${e.status}`);return e.json()})).then((e=>{feedbackGlobal=e,renderResultsWithModal()})).catch((e=>{console.log(`Error: ${e.message}`)}))}function renderResults(){if(void 0!==claimGlobal){let e=formatForFastTreeview(0,claimGlobal.claim.configurations,[]);addOrphans(e.objectArray,"#config-table"),e=formatForFastTreeview(0,claimGlobal.claim.nodes,[]),addOrphans(e.objectArray,"#nodes-table"),fillMetadata(claimGlobal.claim.metadata,"#metadata-table"),fillVersionsElement(claimGlobal.claim.versions,"#versions-table"),fillResults(claimGlobal.claim.results,"#results-table","#optional-","all"),fillResults(claimGlobal.claim.results,"#mandatory-far-edge-table","#optional-far-edge-table","faredge"),fillResults(claimGlobal.claim.results,"#mandatory-telco-table","#optional-telco-table","telco"),fillResults(claimGlobal.claim.results,"#mandatory-non-telco-table","#optional-non-telco-table","nontelco"),fillResults(claimGlobal.claim.results,"#mandatory-extended-table","#optional-extended-table","extended"),void 0!==feedbackGlobal&&fillFeedback(feedbackGlobal)}}function linkToStyle(e){const t=[],n=e.sheet;let o;try{o=n.cssRules||n.rules}catch(e){return console.log(e),null}for(let e=0;e<o.length;++e){const n=o[e];".collapse:not(.show)"!==o[e].selectorText&&t.push(n.cssText)}const l=document.createElement("style");return l.type="text/css",l.appendChild(document.createTextNode(t.join("\r\n"))),l}function getHtmlResults(){let e=document.getElementById("selectScenarioComboBox");const t=document.implementation.createHTMLDocument(),n=t.head,o=t.body,l=t.createElement("script");l.type="text/javascript",l.textContent="\n  function filterTestCasesBasedOnStateHandler(tableId, tableName, state, mandatoryOptional) { // eslint-disable-line no-unused-vars\n    const checkBox = document.getElementById('filter-' + mandatoryOptional + '-' + state + '-' + tableName)\n    const show = checkBox.checked\n    if (show) {\n      checkBox.setAttribute('checked', '')\n    } else {\n      checkBox.removeAttribute('checked')\n    }\n    const tableIdClean = tableId.replace(/#/g, '')\n    const table = document.getElementById(tableIdClean)\n    const elements = table.getElementsByTagName('rh-accordion-header')\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i]\n      const id = element.getAttribute('data-id')\n      if (id === state) {\n        if (show === true) {\n          element.removeAttribute('hidden')\n        } else {\n          element.setAttribute('hidden', 'hidden')\n        }\n      }\n    }\n  }\n";const a=document.createElement("script");a.type="importmap",a.textContent=' {\n      "imports": {\n        "@rhds/elements/": "https://ga.jspm.io/npm:@rhds/elements@1.2.0/elements/",\n        "@rhds/elements/lib/": "https://ga.jspm.io/npm:@rhds/elements@1.2.0/elements/lib/",\n        "@patternfly/elements/": "https://ga.jspm.io/npm:@patternfly/elements@2.4.0/"\n      },\n      "scopes": {\n        "https://ga.jspm.io/": {\n          "@lit/reactive-element": "https://ga.jspm.io/npm:@lit/reactive-element@1.6.3/reactive-element.js",\n          "@lit/reactive-element/decorators/": "https://ga.jspm.io/npm:@lit/reactive-element@1.6.3/decorators/",\n          "@patternfly/elements/": "https://ga.jspm.io/npm:@patternfly/elements@2.4.0/",\n          "@patternfly/pfe-core": "https://ga.jspm.io/npm:@patternfly/pfe-core@2.4.1/core.js",\n          "@patternfly/pfe-core/": "https://ga.jspm.io/npm:@patternfly/pfe-core@2.4.1/",\n          "@rhds/tokens/media.js": "https://ga.jspm.io/npm:@rhds/tokens@1.1.2/js/media.js",\n          "lit": "https://ga.jspm.io/npm:lit@2.8.0/index.js",\n          "lit-element/lit-element.js": "https://ga.jspm.io/npm:lit-element@3.3.3/lit-element.js",\n          "lit-html": "https://ga.jspm.io/npm:lit-html@2.8.0/lit-html.js",\n          "lit-html/": "https://ga.jspm.io/npm:lit-html@2.8.0/",\n          "lit/": "https://ga.jspm.io/npm:lit@2.8.0/",\n          "tslib": "https://ga.jspm.io/npm:tslib@2.6.2/tslib.es6.mjs"\n        },\n        "https://ga.jspm.io/npm:@patternfly/elements@2.4.0/": {\n          "lit": "https://ga.jspm.io/npm:lit@2.6.1/index.js",\n          "lit/": "https://ga.jspm.io/npm:lit@2.6.1/"\n        }\n      }\n    }\n',t.head.appendChild(a),t.head.appendChild(l);const d=document.createElement("script");d.type="module",d.textContent=" \n  // import design system element definitions,\n  // which auto-register their tagnames once executed\n  import '@rhds/elements/rh-button/rh-button.js';\n  import '@rhds/elements/rh-dialog/rh-dialog.js';\n  import '@rhds/elements/rh-footer/rh-footer-universal.js';\n  import '@rhds/elements/rh-footer/rh-footer-universal.js';\n  import '@patternfly/elements/pf-text-input/pf-text-input.js';\n  import '@rhds/elements/rh-tabs/rh-tabs.js';\n  import '@rhds/elements/rh-accordion/rh-accordion.js';\n  import 'https://jspm.dev/@rhds/elements/rh-tag/rh-tag.js'\n  <\/script>\n",t.head.appendChild(d),e=document.getElementById("selectScenarioComboBox"),insertResults(o,"mandatory"),"all"!==e.value&&insertResults(o,"optional"),document.querySelectorAll("link[rel='stylesheet']").forEach((function(e){const t=linkToStyle(e);null!==t&&n.insertBefore(t,n.firstChild)})),document.querySelectorAll("style").forEach((function(e){const t=e.cloneNode(!0);n.insertBefore(t,n.firstChild)}));return t.querySelectorAll("textarea").forEach((e=>{e.readOnly=!0})),t.documentElement.outerHTML}function downloadjsonHandler(){const e={},t=["all","telco","nontelco","extended","faredge"];for(const n in claimGlobal.claim.results)for(let o=0;o<t.length;o++){const l="source-"+t[o]+"-"+n,a=document.getElementById(l);null!==a&&(e[l]=a.value)}const n=document.createElement("a");n.setAttribute("href","data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e))),n.setAttribute("download","feedback.json"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function download(){for(const e in claimGlobal.claim.results)saveTextAreaContent(e);const e=document.createElement("a");e.setAttribute("href","data:text/html;charset=UTF-8,"+encodeURIComponent(getHtmlResults())),e.setAttribute("download","results-feedback"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}function insertResults(e,t){const n=document.getElementById(t+"-checkbox"),o=document.getElementById("selectScenarioComboBox").value;let l=document.getElementById("results-table");"faredge"===o&&!0===n.checked&&(l=document.getElementById(t+"-far-edge-table")),"telco"===o&&!0===n.checked&&(l=document.getElementById(t+"-telco-table")),"nontelco"===o&&!0===n.checked&&(l=document.getElementById(t+"-non-telco-table")),"extended"===o&&!0===n.checked&&(l=document.getElementById(t+"-extended-table"));const a=l.cloneNode(!0);e.appendChild(a)}function NonCompliantReasonTextToJson(e){const t=/NonCompliantObjectsOut":(\[.*])/.exec(e);let n;if(t){const e=t[1];n=JSON.parse(e)}return n}function CompliantReasonTextToJson(e){const t=/"CompliantObjectsOut":(\[.*]),"NonCompliantObjectsOut"/.exec(e);let n;if(t){const e=t[1];n=JSON.parse(e)}return n}function ExtractLog(e){const t=/(.*){"CompliantObjectsOut"/.exec(e);let n=e;return t&&(n=t[1]),n}function createTypeList(e){const t=new Map;return void 0===e||e.forEach((function(e){t.set(e.ObjectType,!0)})),t}function createReasonTableAllTypes(e){const t=createTypeList(e);let n="";return t.forEach((function(t,o){n+="<h2> Type: "+o+"</h2>",n+='<div class="table-responsive">',n+=createReasonTableOneType(e,o),n+="</div>"})),n}function createReasonTableOneType(e,t){if(void 0===e)return"";const n=document.createElement("table");n.setAttribute("border","1"),n.setAttribute("class","table table-striped");let o=!0;const l=document.createElement("tbody");return e.forEach((function(e){if(e.ObjectType!==t)return;if(o){const t=document.createElement("thead"),l=document.createElement("tr");null!==e.ObjectFieldsKeys&&Object.values(e.ObjectFieldsKeys).forEach((function(e){const t=document.createElement("th");t.textContent=e,l.appendChild(t)})),t.appendChild(l),n.appendChild(t),o=!1}const a=document.createElement("tr");null!==e.ObjectFieldsValues&&Object.values(e.ObjectFieldsValues).forEach((function(e){const t=document.createElement("td");t.textContent=e,a.appendChild(t)})),l.appendChild(a)})),n.appendChild(l),n.outerHTML}function isStringInt(e){return/^\d+$/.test(e)}function formatForFastTreeview(e,t,n){let o="",l="";for(const a in t){if(null===t[a]||"managedFields"===a)continue;"name"===a.toLowerCase()&&(o=t[a]),"namespace"===a.toLowerCase()&&(l=t[a]);const d=uuidNode++;if(Array.isArray(t[a])||"[object Object]"===t[a].toString()){const s=formatForFastTreeview(d,t[a],n),i=s.name,r=s.namespace;""!==i&&(o=i,l=r);let c=a;isStringInt(a)&&""!==o&&(c="ns:"+l+" name:"+o,o="",l=""),n.push({id:d.toString(),name:c,parent:e.toString()})}else n.push({id:d.toString(),name:a+" : "+t[a],parent:e.toString()})}return{objectArray:n,name:o,namespace:l}}function orphans(e){return e.filter((function(e){return"0"===e.parent}))}function hasChildren(e,t){return e.some((function(e){return e.parent===t}))}function getChildren(e,t){return e.filter((function(e){return e.parent===t}))}function generateListItem(e,t){const n=document.createElement("sl-tree-item");n.id="item-"+t.id,hasChildren(e,t.id)&&n.addEventListener("click",expand.bind(null,e,n),{once:!0});const o=document.createElement("span");return o.textContent=t.name,n.appendChild(o),n}function expand(e,t,n){n.preventDefault(),n.stopPropagation();const o=n.target.parentElement.id.replace("item-","");if(getChildren(e,o).map(generateListItem.bind(null,e)).forEach((function(e){t.appendChild(e)})),n.shiftKey){const n=countChildren(e,o,0);console.log(n),initProgressBar(),expandAll({value:t},n,{value:2})}}function addOrphans(e,t){const n=document.querySelector(t),o=orphans(e);if(o.length){const t=o.map(generateListItem.bind(null,e)),l=document.createElement("sl-tree");t.forEach((function(e){l.appendChild(e)})),n.appendChild(l)}}function expandAll(e,t,n){if(isAnchorElement(e.value)){const t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});e.value.dispatchEvent(t)}n.value++;updateProgressBar(100*n.value/t),e.value.children.length>0&&setTimeout((function(){for(let o=0;o<e.value.children.length;o++){expandAll({value:e.value.children[o]},t,n)}}),0)}function isAnchorElement(e){return e instanceof HTMLAnchorElement}function countChildren(e,t,n){const o=getChildren(e,t);return n++,o.length>0&&(n+=2),o.forEach((function(t){n=countChildren(e,t.id,n)+1})),n}function updateProgressBar(e){const t=document.querySelector(".progress-bar"),n=t.style.width.replace(/%/g,"");e>=parseInt(n)+2&&(t.style.width=e.toString()+"%")}function initProgressBar(){document.getElementById("progress-bar").removeAttribute("hidden");document.querySelector(".progress-bar").style.width="0%"}</script>
  <script async src="https://ga.jspm.io/npm:es-module-shims@1.7.2/dist/es-module-shims.js"></script>
  <script type="module">
      import 'element-internals-polyfill';
  </script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.11.0/cdn/components/tree/tree.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.11.0/cdn/shoelace.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.11.2/cdn/themes/light.css">
    <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.11.2/cdn/shoelace-autoloader.js"></script>
</head>

<body >

  <header>
    <img alt="Red Hat"
         src="https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg"
         width="100"
         height="30">
         <h3>CNF Certification Test Parser</h3>
        </header>

        <main>
        <div class="mb-3">
          <h6>Upload claim.json file</h6>
           <input class="form-control" type="file" id="formFile">
           <h6>Choose a scenario:
           <select name="class" id="selectScenarioComboBox" onchange="selectScenarioHandler()">
             <option value="all"> All</option>
             <option value="faredge"> Far-Edge</option>
             <option value="telco"> Telco</option>
             <option value="nontelco"> Non-Telco</option>
             <option value="extended"> Extended</option>
           </select>
          </h6>
           <p hidden id="UploadFeedback">
            Upload Feedback File: <input type="file" id="feedbackFile">
          </p>
          <rh-button  id="download" type="button" variant="secondary" onclick="download()" hidden>Download
            Results</rh-button >
          <rh-button  id="downloadjsonHandler" variant="secondary" type="button" onclick="downloadjsonHandler()"
            hidden>Download Feedback as a JSON file</rh-button >
            <div>
            <label id="myCheck-mandatory" for="mandatory-checkbox" hidden>Show Mandatory Results for that scenario</label>
            <input type="checkbox" id="mandatory-checkbox" data-bs-target="#results" checked
              onclick="makeResultsTableVisible('mandatory')" hidden>
            <label id="myCheck-result" for="optional-checkbox" hidden>Show Optional Results for that scenario</label>
            <input type="checkbox" id="optional-checkbox" data-bs-target="#results" 
              onclick="makeResultsTableVisible('optional')" hidden>
          </div>
        </div>
  <div class="progress" id="progress-bar" hidden>
    <progress  class="progress-bar" aria-label="progress" aria-valuenow="0" aria-valuemin="0" 
    aria-valuemax="100" ></progress>
  </div>
  <rh-tabs>
    <rh-tab slot="tab" onclick="hideAllResultsTabObjects()">Configuration</rh-tab>
    <rh-tab-panel id="config" >
    <rh-table>
      <div id="config-table"></div>
    </rh-table>
  </rh-tab-panel>
    <rh-tab slot="tab"  onclick="hideAllResultsTabObjects()">Metadata</rh-tab>
    <rh-tab-panel id="metadata">
      <rh-table>
        <table id="metadata-table">
        </table>
      </rh-table>
    </rh-tab-panel>
    <rh-tab slot="tab"  onclick="hideAllResultsTabObjects()" >Nodes</rh-tab>
    <rh-tab-panel id="nodes">
      <rh-table>
        <table id="nodes-table">
        </table>
      </rh-table>
    </rh-tab-panel>
    <rh-tab slot="tab" onclick="resfreshResultsTabContent()">Results</rh-tab>
    <rh-tab-panel  id="results">
      <rh-table>
        <table class="table" id="results-table" hidden>
        </table>
        <table class="table" id="mandatory-far-edge-table" hidden>
        </table>
        <table class="table" id="optional-far-edge-table" hidden>
        </table>
        <table class="table" id="mandatory-telco-table" hidden>
        </table>
        <table class="table" id="optional-telco-table" hidden>
        </table>
        <table class="table" id="mandatory-non-telco-table" hidden>
        </table>
        <table class="table" id="optional-non-telco-table" hidden>
        </table>
        <table class="table" id="mandatory-extended-table" hidden>
        </table>
        <table class="table" id="optional-extended-table" hidden>
        </table>
      </rh-table>
    </rh-tab-panel>
    <rh-tab slot="tab"  onclick="hideAllResultsTabObjects()" >Versions</rh-tab>
    <rh-tab-panel id="versions">
      <rh-table>
        <table id="versions-table">
        </table>
      </rh-table>
    </rh-tab-panel>
  </rh-tabs>

  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Warning</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="modalBody">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Stop Loading</button>
          <button type="button" id="continueLoadingClaim" data-bs-dismiss="modal"
            class="btn btn-primary">Continue</button>
        </div>
      </div>
    </div>
  </div>

        </main>
            <!-- Universal Footer -->
    <rh-footer-universal>
      <h3 slot="links-primary" data-analytics-text="Red Hat legal and privacy links" hidden>Red Hat legal and privacy links</h3>
      <ul slot="links-primary" data-analytics-region="page-footer-bottom-primary">
        <li><a href="https://redhat.com/en/about/company" data-analytics-category="Footer|Corporate" data-analytics-text="About Red Hat">About Red Hat</a></li>
        <li><a href="https://redhat.com/en/jobs" data-analytics-category="Footer|Corporate" data-analytics-text="Jobs">Jobs</a></li>
        <li><a href="https://redhat.com/en/events" data-analytics-category="Footer|Corporate" data-analytics-text="Events">Events</a></li>
        <li><a href="https://redhat.com/en/about/office-locations" data-analytics-category="Footer|Corporate" data-analytics-text="Locations">Locations</a></li>
        <li><a href="https://redhat.com/en/contact" data-analytics-category="Footer|Corporate" data-analytics-text="Contact Red Hat">Contact Red Hat</a></li>
        <li><a href="https://redhat.com/en/blog" data-analytics-category="Footer|Corporate" data-analytics-text="Red Hat Blog">Red Hat Blog</a></li>
        <li><a href="https://redhat.com/en/about/our-culture/diversity-equity-inclusion" data-analytics-category="Footer|Corporate" data-analytics-text="Diversity equity and inclusion">Diversity, equity, and inclusion</a></li>
        <li><a href="https://coolstuff.redhat.com/" data-analytics-category="Footer|Corporate" data-analytics-text="Cool Stuff Store">Cool Stuff Store</a></li>
        <li><a href="https://www.redhat.com/en/summit" data-analytics-category="Footer|Corporate" data-analytics-text="Red Hat Summit">Red Hat Summit</a></li>
      </ul>
      <rh-footer-copyright slot="links-secondary">Â© 2022 Red Hat, Inc.</rh-footer-copyright>
      <h3 slot="links-secondary" data-analytics-text="Red Hat legal and privacy links" hidden>Red Hat legal and privacy links</h3>
      <ul slot="links-secondary" data-analytics-region="page-footer-bottom-secondary">
        <li><a href="https://redhat.com/en/about/privacy-policy" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Privacy statement">Privacy statement</a></li>
        <li><a href="https://redhat.com/en/about/terms-use" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Terms of use">Terms of use</a></li>
        <li><a href="https://redhat.com/en/about/all-policies-guidelines" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="All policies and guidelines">All policies and guidelines</a></li>
        <li><a href="https://redhat.com/en/about/digital-accessibility" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Digital accessibility" class="active">Digital accessibility</a></li>
        <!-- If your website supports trustarc include this item to add Cookie Preferences to your site. -->
        <!-- <li><span id="teconsent"> </span></li> -->
      </ul>
    </rh-footer-universal>
  <!-- This will load the initial JSON file, if present. It may fail. -->
  <script src="./claimjson.js"></script>
  <script src="./feedback.js"></script>


</body>

</html>
